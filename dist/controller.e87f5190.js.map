{"version":3,"sources":["src/js/config.js","src/js/helpers.js","src/js/model.js","src/js/views/view.js","src/js/views/cryptoListView.js","src/js/views/detailView.js","src/js/views/paginationView.js","src/js/controller.js"],"names":["API_100_LARGEST_URL","API_BASE_URL","RESULTS_PER_PAGE","CRYPTOS_OF_INTEREST","getJSON","url","fetch","res","json","data","ok","Error","message","status","filterCryptos","array","currency","myCryptos","filter","crypto","some","symbol","slice","length","state","search","cryptoInfo","resultsPerPage","currentPage","activeCoin","fetchCryptoInfo","map","coin","id","marketCap","market_cap","name","price","current_price","priceChangePerc","price_change_percentage_24h","volume24h","total_volume","rank","market_cap_rank","circulatingSupply","circulating_supply","totalSupply","max_supply","ath","fromAthPerc","ath_change_percentage","console","log","loadCoinDetails","find","getCryptoPage","page","first","last","View","Array","isArray","renderError","_data","markup","_generateMarkup","_clear","_parentEl","insertAdjacentHTML","innerHTML","_errorMessage","icons","CryptoListView","document","querySelector","d","toUpperCase","join","DetailView","handler","forEach","ev","window","addEventListener","PaginationView","e","btn","target","closest","dataset","goto","goToPage","curPage","totalPages","Math","ceil","controlSearch","cryptoListView","renderSpinner","model","render","paginationView","detailView","controlDetails","location","hash","init","addHandlerDetails","addHandlerPageChange"],"mappings":"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c;QJFK,EMWD,CJcpB,KDAIC,GAAG,EAAEjB,IAAI,CAACiB,GAXuC,OCWrC;MFzBK,AE0BnB,IAAMgB,EIfY,ILehBf,ACAU,WDAC,EAAElB,IAAI,CAACmB,+ECESqB,cAFjB,kFAAZ;IF1BmB,QMWD,ELGiC,CAAX;EDdrB,CAAH,GEgChB,KAAKL,CIVLf,ALRwC,CAAT,CAA/B,GCkBA,EIVO,CAACC,GAAR;WDnBF,CJO6B,6BIPR2B,OAArB,EAA8B;ELHZ,IKIhB,AH6BA,IItBkB,CDPbZ,AH6BAA,CDvBsB,MDVlBhE,EKIT,AH6BA,CG7BegF,AH6BAf,IFjCC,YKIhB,CAAgC,CH6BhC,CAAkC,KG7BlC,EAAyC,KH6BzC,EAAgDJ,GG7BNqB,CAAD,EAAO,AH6BhD;IFjCgB,AEkCjB,IG7BG,ECMgB,CHNpB,ACDA,CCCUC,GAAG,GAAGD,CAAC,CAACE,MAAF,CAASC,OAAT,CAAiB,CDDjBhF,EDCE,ECDlB,EAAsB,OCCN,CAAZ;ELLc,IGMhB,ACDA2C,ECEE,EJGyB,EKCT,ADJZ,CFDC,ACDA,ACEAmC,CDFClC,ECEN,CDFF,CAAY5C,ACEA,IDFZ,mVDWM,KAAKuD,KAAL,CAAWjC,GAAX,CAAgB,UAAA6C,CAAC,EAAG;AHhBV,GAAb,GIMH,EEKkB,AHMhB,AERAxB,GDHGY,CHIsB,GIDlB,CDHT,ACGUX,GDHG5C,ACGX,CAAY8E,GDHd,ACGE,yFFSwDX,CAAC,CAAC3C,EAD1D,8FAGiC2C,CAAC,CAACjC,IAHnC,wGAKkCiC,CAAC,CAACxC,IALpC,+DAMqCwC,CAAC,CAACvD,MAAF,CAASwD,WAAT,EANrC,8EAQiCD,CAAC,CAACvC,KARnC;ICVH,EEImB,AHmBjB,CAdK,CENJe,CFoBC0B,GFpBwB,CEMrB,CAcE,CEpBC,CFMH,AENIzB,CFJH,EAwBMyB,AEpBX,CAAYS,GFJP,AEIU,CFoBC,AEpBAG,EFJX,CAAP,IEIc,CAAYC,IAAxB;ICCgB,AHoBnB,IEpBG,IJkBFvC,AIlBQwC,OJkBD,CAACvC,AIlBQ,GJkBhB,AIlBmB,CAACkC,GAAG,CAACG,OAAJ,CAAYC,IAA9B;ECAgB,CAAH,KDEbX,OAAO,CAACY,QAAD,CAAP;ALAC,IAAM9E,EKCR,CAVD,GJM2B,CGD7B,MJIwB,GAAG,SAAhBA,SIJOkE,IJIS,CAAUjE,EIJrC,EAA2B,CJIA,EAAiBC,QAAjB,EAA2B;EMFrC,ANGjB,EKCC,ELDKC,AIJJ,CAAC,GHA0B,KDId,GMHXgF,ANGclF,CIJhB,EAAe,EJIM,CAACG,GIJtB,EAAuB+D,CJIP,CMHD,ANGc,KIJ7B,CAA+B,IJID9D,MAAD,AIJG+D,EAAD;EDVNtB,EGWV,ANGc,IIJE,GJK/BzD,CCL2B,GGCzBgF,GDsBN,GCtBY,CAACC,gBJIT,AIJE,CJIkBhE,AIJM8D,EAAxB,EJIF,AIJ8BF,CJK5B,MILA,CAD6B,GJM5B3D,MAAD;EMLa,INKb,AIN6B,CAA/B,CHA2B,KDOvBA,MAAM,KAAKF,MAAM,CAACE,MAAP,CAAcC,KAAd,CAAoB,CAApB,EAAuB,CAAvB,CAAX,IACAH,MAAM,CAACE,MAAP,CAAcC,KAAd,CAAoB,CAACN,QAAQ,CAACO,MAA9B,MAA0CP,QAD1C,IAEAG,MAAM,CAACE,MAAP,CAAcE,MAAd,GAAuB,CAHzB;AMLa,GAAnB,CNKM,AIHH,CJEC,CAD6B,ACJF,KIO7B,2BAAkB;ELHa,CAAb,CAAlB,ACJ6B,EIQ3B,IAAMsE,KFgBK,EEhBE,EFgBEpB,CEhBC,KAAKT,KAAL,CAAWpC,EFgBhB,SEhBX;ACQJ,ENHE,ACb6B,CAAH,CKgBtB4E,EDPF,GLIKvF,CKJC6E,QCOU,ANHlB,EKJkB,CCOG,EDPAC,IAAI,CAACC,ECOtBQ,EDPiB,CACjB,KAAKxC,KAAL,CCMiB,ADNNtC,GCMkB,ODN7B,CAAsBH,MAAtB,GAA+B,KAAKyC,KAAL,CAAWrC,cADzB,CAAnB;ALKH,CAXM,CMcL,IAAMM,ADLJmB,ECKM,GAAG+B,AFZX,ECOS,CAAC9B,GCKO,ADLf,CCKgBoD,ADLJZ,OAAZ,CCKS,CAAgBa,IAAhB,CAAqBpF,KAArB,CAA2B,AFZpB,CEYP,CAAX;EAEA8E,ALnB0B,IGMxB,ACOAhD,CCMG,CAACE,KDNG,CAACD,GAAR,CJbSvB,AIaGgE,KCMd,CAAsB7D,EAAtB,EDNE,KJbwB,uCGQZ,KAAK+B,KAAL,CAAW5B,IAFvB,eAEgC,KAAK4B,KAAL,CAAW3C,MAAX,CAAkBwD,WAAlB,EAFhC,qCAGY,KAAKb,KAAL,CAAW3B,KAHvB,4BAG8C,KAAK2B,KAAL,CAAW5B,IAHzD,mCAIU,KAAK4B,KAAL,CAAWf,GAJrB,iCAKU,KAAKe,KAAL,CAAWd,WALrB,0FASU,KAAKc,KAAL,CAAW9B,SATrB,gCAUU,KAAK8B,KAAL,CAAWvB,SAVrB,gCAWU,KAAKuB,KAAL,CAAWnB,iBAXrB,gCAYU,KAAKmB,KAAL,CAAWjB,WAAX,GAAyB,KAAKiB,KAAL,CAAWjB,WAApC,GAAkD,GAZ5D;IHNwB,AGsBzB,ECRC,IAAI8C,OAAO,KAAK,CAAZ,IAAiBC,UAAU,GAAG,CAAlC,EACE,2CAEAD,OAAO,GAAG,CAFV,8EAIWA,OAAO,GAAG,CAJrB;ECKJU,ALpB0B,II0BxB,IAAIT,UAAU,CCNhB,CAAWO,CDMQ,CAAb,ICNN,ADMwBR,CCNNO,KAAK,CAAC5E,ADMO,KCNb,ADMkBsE,CCNNjE,SDM5B,CCNF,CDOI,2CAEAgE,OAAO,GAAG,CAFV,0NAOmBA,OAAO,GAAG,CAP7B;ACNL,ALrB2B,CKgB5B,ELhBO,GIsCH,IAAIA,OAAO,GAAGC,UAAd,EACE,+CAEID,OAAO,GAAG,CAFd,0NAOmBA,OAAO,GAAG,CAP7B,2EAWMA,OAAO,GAAG,CAXhB,sFAamBA,OAAO,GAAG,CAb7B;MAoBF;ACpCJ,EFjCyBjC,EEiCnBgC,ADqCH,QCrCW,GAAG,SAAXA,QAAW,CAAUnC,IAAV,EAAgB;EAC/ByC,uBAAA,CAAeG,MAAf,CAAsBD,KAAK,CAAC5C,aAAN,CAAoBC,IAApB,CAAtB;ALDK,IAAMH,WGEE,IHFa,AGETyB,GHFY,OGEhB,EHFFzB,eAAkB,CAAUrB,EAAV,EAAc;EKE3CqE,ALDA,KAAK9E,KAAL,CAAWK,UAAX,EKCA,CAAewE,ALDS,KAAK7E,CKC7B,CAAsB4E,GLDE,CAAW3E,CKCR,CAACD,ILDJ,CKCF,ALDoBE,CKCRD,MAAlC,GLDwB,CAA6B8B,IAA7B,CACtB,UAACvB,IAAD;AKCH,CAHD,CDjC6B4B,EJmCzB,OAAU5B,IAAI,CAACC,EAAL,KAAYA,EAAtB;EAAA,CADsB,CAAxB;AKIF,ALDC,CAJM,GKKD0E,IAAI,GAAG,IDmCE,IAAItB,CCnCbsB,IAAO,GAAY,MDmCV;EClCbJ,mBAAA,CAAWK,iBAAX,CAA6BJ,cAA7B;;EACAF,uBAAA,CAAeO,oBAAf,CAAoCjB,QAApC;AACD,ALFM,CKDP,GLCapC,aAAa,GAAG,SAAhBA,aAAgB,GAA2C;EAAA,IAAjCC,IAAiC,uEAA1BjC,KAAK,CAACC,MAAN,CAAaG,WAAa;AKIxEqE,ELHEzE,KAAK,CAACC,KKGK,CLHX,CAAaG,WAAb,GAA2B6B,IAA3B;AKIFkD,ELFE,EKEE,ELFIjD,KAAK,GAAG,CAACD,IAAI,GAAG,CAAR,IAAajC,KAAK,CAACC,MAAN,CAAaE,cAAxC;EACA,IAAMgC,IAAI,GAAGF,IAAI,GAAGjC,KAAK,CAACC,MAAN,CAAaE,cAAjC;EAEA,OAAOH,KAAK,CAACC,MAAN,CAAaC,UAAb,CAAwBJ,KAAxB,CAA8BoC,KAA9B,EAAqCC,IAArC,CAAP;AACD,CAPM","file":"controller.e87f5190.js","sourceRoot":"..","sourcesContent":["export const API_100_LARGEST_URL =\r\n  \"coins/markets?vs_currency=usd&order=market_cap_desc&per_page=100&page=1&sparkline=false'\";\r\nexport const API_BASE_URL = \"https://api.coingecko.com/api/v3/\";\r\nexport const RESULTS_PER_PAGE = 10;\r\n\r\nexport const CRYPTOS_OF_INTEREST = [\"BTC\", \"ETH\", \"BNB\", \"ADA\", \"XRP\", \"SOL\"];\r\n\r\n// export const API_BASE_URL = \"https://api.binance.com\";\r\n// export const API_AVG_PRICE_URL = \"/api/v3/ticker/24hr\";\r\n","import { CRYPTOS_OF_INTEREST } from \"./config\";\r\n\r\nexport const getJSON = async function (url) {\r\n  try {\r\n    const res = await fetch(url);\r\n    const data = await res.json();\r\n\r\n    if (!res.ok) throw new Error(`${data.message} (${res.status})`);\r\n\r\n    return data;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const filterCryptos = function (array, currency) {\r\n  const myCryptos = array.filter((crypto) =>\r\n    CRYPTOS_OF_INTEREST.some(\r\n      (symbol) =>\r\n        symbol === crypto.symbol.slice(0, 3) &&\r\n        crypto.symbol.slice(-currency.length) === currency &&\r\n        crypto.symbol.length < 8\r\n    )\r\n  );\r\n\r\n  return myCryptos;\r\n};\r\n","import { getJSON } from \"../js/helpers\";\r\nimport { API_BASE_URL, API_100_LARGEST_URL, RESULTS_PER_PAGE } from \"./config\";\r\n\r\nexport const state = {\r\n  search: {\r\n    cryptoInfo: [],\r\n    resultsPerPage: RESULTS_PER_PAGE,\r\n    currentPage: 1,\r\n  },\r\n  activeCoin: {},\r\n};\r\n\r\nexport const fetchCryptoInfo = async function () {\r\n  try {\r\n    const data = await getJSON(`${API_BASE_URL}${API_100_LARGEST_URL}`);\r\n\r\n    this.state.search.cryptoInfo = data.map((coin) => ({\r\n      id: coin.id,\r\n      symbol: coin.symbol,\r\n      marketCap: coin.market_cap,\r\n      name: coin.name,\r\n      price: coin.current_price,\r\n      priceChangePerc: coin.price_change_percentage_24h,\r\n      volume24h: coin.total_volume,\r\n      rank: coin.market_cap_rank,\r\n      circulatingSupply: coin.circulating_supply,\r\n      totalSupply: coin.max_supply,\r\n      ath: coin.ath,\r\n      fromAthPerc: coin.ath_change_percentage,\r\n    }));\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const loadCoinDetails = function (id) {\r\n  this.state.activeCoin = this.state.search.cryptoInfo.find(\r\n    (coin) => coin.id === id\r\n  );\r\n};\r\n\r\nexport const getCryptoPage = function (page = state.search.currentPage) {\r\n  state.search.currentPage = page;\r\n\r\n  const first = (page - 1) * state.search.resultsPerPage;\r\n  const last = page * state.search.resultsPerPage;\r\n\r\n  return state.search.cryptoInfo.slice(first, last);\r\n};\r\n","import icons from \"../../img/icons.svg\";\r\n\r\nexport default class View {\r\n  _data;\r\n\r\n  render(data) {\r\n    if (!data || (Array.isArray(data) && data.length === 0))\r\n      return this.renderError();\r\n\r\n    this._data = data;\r\n    const markup = this._generateMarkup();\r\n    this._clear();\r\n    this._parentEl.insertAdjacentHTML(\"afterbegin\", markup);\r\n  }\r\n  _clear() {\r\n    this._parentEl.innerHTML = \"\";\r\n  }\r\n\r\n  renderError() {\r\n    const markup = `<div class=\"error\">\r\n                      <p>${this._errorMessage}</p>\r\n                    </div>`;\r\n\r\n    this._clear();\r\n    this._parentEl.insertAdjacentHTML(\"afterbegin\", markup);\r\n  }\r\n\r\n  renderSpinner() {\r\n    const markup = `<div class=\"spinner\">\r\n                    <svg>\r\n                    <use href=\"${icons}#icon-loader\"></use>\r\n                    </svg>\r\n                    </div>`;\r\n\r\n    this._clear();\r\n    this._parentEl.insertAdjacentHTML(\"afterbegin\", markup);\r\n  }\r\n}\r\n","import View from \"./view\";\r\n\r\nclass CryptoListView extends View {\r\n  _parentEl = document.querySelector(\".results\");\r\n  _errorMessage =\r\n    \"Could not match any coin/token to your search... Please try with a different query!\";\r\n\r\n  _generateMarkup() {\r\n    return [ `<li class=\"preview\">\r\n    <div class=\"preview__data\">\r\n        <div class=\"preview__rank\">Rank</div>\r\n        <div class=\"preview__title\"> \r\n          <h4 class=\"preview__name\" style=\"font-size:1.2rem;margin-left:.5rem\" >Coin/Token</h4>\r\n        </div>\r\n        <p class=\"preview__price\">Price</p>\r\n\r\n    </div>\r\n    </a>\r\n </li>` , this._data.map( d=> {\r\n      return `<li class=\"preview\">\r\n      <a class=\"preview__link preview__link--active\" href=\"#${d.id}\">\r\n      <div class=\"preview__data\">\r\n          <div class=\"preview__rank\">${d.rank}</div>\r\n          <div class=\"preview__title\"> \r\n            <h4 class=\"preview__name\">${d.name}</h4>\r\n            <h2 class=\"preview__symbol\">(${d.symbol.toUpperCase()})</h2>\r\n          </div>\r\n          <p class=\"preview__price\">$${d.price}</p>\r\n\r\n      </div>\r\n      </a>\r\n   </li>`;\r\n    }).join(\"\")].join(\"\");\r\n  }\r\n}\r\n// <img src=./node_modules/cryptocurrency-icons/svg/white/aave.svg/>${d.symbol.toLowerCase()}\"/>\r\nexport default new CryptoListView();\r\n","import View from \"./view\";\r\n\r\nclass DetailView extends View {\r\n  _parentEl = document.querySelector(\".crypto-details\");\r\n  _errorMessage = \"Did not find details for this item :(\";\r\n\r\n  loadCoinDetails(data) {\r\n    console.log(data);\r\n    this._data = data;\r\n  }\r\n\r\n  addHandlerDetails(handler) {\r\n    [\"hashchange\", \"load\"].forEach((ev) =>\r\n      window.addEventListener(ev, handler)\r\n    );\r\n  }\r\n\r\n  _generateMarkup() {\r\n    return `\r\n    <div class=\"details-top\">\r\n        <span>${this._data.name} (${this._data.symbol.toUpperCase()})</span>\r\n        <span>${this._data.price} </span> <span>${this._data.name} </span>\r\n        <li>${this._data.ath} </li>\r\n        <li>${this._data.fromAthPerc} </li>\r\n    </div>\r\n    <div class=\"details-bottom\">\r\n       \r\n        <li>${this._data.marketCap}</li>\r\n        <li>${this._data.volume24h}</li>\r\n        <li>${this._data.circulatingSupply}</li>\r\n        <li>${this._data.totalSupply ? this._data.totalSupply : \"-\"}</li>\r\n       \r\n    </div>\r\n    `;\r\n  }\r\n}\r\n\r\nexport default new DetailView();\r\n","import View from \"./view\";\r\n\r\nclass PaginationView extends View {\r\n  _parentEl = document.querySelector(\".pagination\");\r\n\r\n  addHandlerPageChange(handler) {\r\n    this._parentEl.addEventListener(\"click\", (e) => {\r\n      const btn = e.target.closest(\".btn--inline\");\r\n\r\n      if (!btn) return;\r\n\r\n      console.log(btn);\r\n      console.log(btn.dataset.goto);\r\n      const goToPage = +btn.dataset.goto;\r\n\r\n      handler(goToPage);\r\n    });\r\n  }\r\n\r\n  _generateMarkup() {\r\n    const curPage = this._data.currentPage;\r\n    const totalPages = Math.ceil(\r\n      this._data.cryptoInfo.length / this._data.resultsPerPage\r\n    );\r\n    console.log(curPage);\r\n    console.log(totalPages);\r\n    if (curPage === 1 && totalPages > 1)\r\n      return `\r\n    <button data-goto=\"${\r\n      curPage + 1\r\n    }\" class=\"btn--inline  pagination__btn--next\">\r\n    <span>Page ${curPage + 1}</span>\r\n    <svg class=\"search__icon\">\r\n      <use href=\"src/img/icons.svg#icon-arrow-right\"></use>\r\n    </svg>\r\n  </button> \r\n    `;\r\n\r\n    if (totalPages > 1 && curPage === totalPages)\r\n      return `\r\n    <button data-goto=\"${\r\n      curPage - 1\r\n    }\" class=\"btn--inline  pagination__btn--prev\">\r\n            <svg class=\"search__icon\">\r\n              <use href=\"src/img/icons.svg#icon-arrow-left\"></use>\r\n            </svg>\r\n            <span>Page ${curPage - 1}</span>\r\n          </button>\r\n    `;\r\n\r\n    if (curPage < totalPages)\r\n      return `\r\n        <button data-goto=\"${\r\n          curPage - 1\r\n        }\" class=\"btn--inline  pagination__btn--prev\">\r\n            <svg class=\"search__icon\">\r\n              <use href=\"src/img/icons.svg#icon-arrow-left\"></use>\r\n            </svg>\r\n            <span>Page ${curPage - 1}</span>\r\n          </button>\r\n\r\n          <button data-goto=\"${\r\n            curPage + 1\r\n          }\" class=\"btn--inline  pagination__btn--next\">\r\n            <span>Page ${curPage + 1}</span>\r\n            <svg class=\"search__icon\">\r\n              <use href=\"src/img/icons.svg#icon-arrow-right\"></use>\r\n            </svg>\r\n          </button> \r\n    `;\r\n\r\n    return ``;\r\n  }\r\n}\r\n\r\nexport default new PaginationView();\r\n","import * as model from \"./model\";\r\nimport cryptoListView from \"./views/cryptoListView\";\r\nimport detailView from \"./views/detailView\";\r\nimport paginationView from \"./views/paginationView\";\r\n\r\n// const timeout = function (s) {\r\n//   return new Promise(function (_, reject) {\r\n//     setTimeout(function () {\r\n//       reject(new Error(`Request took too long! Timeout after ${s} second`));\r\n//     }, s * 1000);\r\n//   });\r\n// };\r\n\r\nconst controlSearch = async function () {\r\n  try {\r\n    cryptoListView.renderSpinner();\r\n\r\n    await model.fetchCryptoInfo();\r\n\r\n    cryptoListView.render(model.getCryptoPage());\r\n    paginationView.render(model.state.search);\r\n\r\n    detailView.render(model.state.search.cryptoInfo[0]);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst controlDetails = function () {\r\n  const id = window.location.hash.slice(1);\r\n\r\n  model.loadCoinDetails(id);\r\n  detailView.render(model.state.activeCoin);\r\n};\r\n\r\nconst goToPage = function (page) {\r\n  cryptoListView.render(model.getCryptoPage(page));\r\n  paginationView.render(model.state.search);\r\n};\r\n\r\nconst init = function () {\r\n  detailView.addHandlerDetails(controlDetails);\r\n  paginationView.addHandlerPageChange(goToPage);\r\n};\r\n\r\ncontrolSearch();\r\ninit();\r\n"]}